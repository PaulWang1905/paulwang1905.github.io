
<!DOCTYPE html>
<html lang="en" data-theme="winter">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="../styles.css" rel="stylesheet">
  <title>Using ‘dd’ to benchmark SSD</title>
</head>


<body>

  <div class="navbar bg-base-100">
    <label class="swap swap-rotate">
      <!-- this hidden checkbox controls the state -->
      <input type="checkbox" class="theme-controller" value="dark" />
    
      <!-- sun icon -->
      <svg
        class="swap-off h-10 w-10 fill-current"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24">
        <path
          d="M5.64,17l-.71.71a1,1,0,0,0,0,1.41,1,1,0,0,0,1.41,0l.71-.71A1,1,0,0,0,5.64,17ZM5,12a1,1,0,0,0-1-1H3a1,1,0,0,0,0,2H4A1,1,0,0,0,5,12Zm7-7a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V4A1,1,0,0,0,12,5ZM5.64,7.05a1,1,0,0,0,.7.29,1,1,0,0,0,.71-.29,1,1,0,0,0,0-1.41l-.71-.71A1,1,0,0,0,4.93,6.34Zm12,.29a1,1,0,0,0,.7-.29l.71-.71a1,1,0,1,0-1.41-1.41L17,5.64a1,1,0,0,0,0,1.41A1,1,0,0,0,17.66,7.34ZM21,11H20a1,1,0,0,0,0,2h1a1,1,0,0,0,0-2Zm-9,8a1,1,0,0,0-1,1v1a1,1,0,0,0,2,0V20A1,1,0,0,0,12,19ZM18.36,17A1,1,0,0,0,17,18.36l.71.71a1,1,0,0,0,1.41,0,1,1,0,0,0,0-1.41ZM12,6.5A5.5,5.5,0,1,0,17.5,12,5.51,5.51,0,0,0,12,6.5Zm0,9A3.5,3.5,0,1,1,15.5,12,3.5,3.5,0,0,1,12,15.5Z" />
      </svg>
    
      <!-- moon icon -->
      <svg
        class="swap-on h-10 w-10 fill-current"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24">
        <path
          d="M21.64,13a1,1,0,0,0-1.05-.14,8.05,8.05,0,0,1-3.37.73A8.15,8.15,0,0,1,9.08,5.49a8.59,8.59,0,0,1,.25-2A1,1,0,0,0,8,2.36,10.14,10.14,0,1,0,22,14.05,1,1,0,0,0,21.64,13Zm-9.5,6.69A8.14,8.14,0,0,1,7.08,5.22v.27A10.15,10.15,0,0,0,17.22,15.63a9.79,9.79,0,0,0,2.1-.22A8.11,8.11,0,0,1,12.14,19.73Z" />
      </svg>
      </label>
    <a class="btn btn-ghost text-xl" href="/index.html"> <span class="box-decoration-clone bg-gradient-to-r from-indigo-600 to-pink-500 text-white px-2">
      Puyu Wang
    </span>  </a>
    <a class="btn btn-ghost text-xl" href="/page/aboutme.html">About</a>
    <a class="btn btn-ghost text-xl" href="https://eng.ox.ac.uk/people/puyu-wang/">Contact</a>
    <a class="btn btn-ghost text-xl" href="/blog_index.html">Blog</a>
</div>

<div class="divider"></div>

<div class="container mx-auto px-5">

  <div tabindex="0" class="bg-primary text-primary-content focus:bg-primary focus:text-primary-content collapse p-5 rounded-lg">
    <div class="collapse-title">
      <div class="breadcrumbs max-w-xs text-sm">
        <ul>
          
          <li><a href="/blog_index.html">Blog</a></li>
          <li><a href="/blog_Blog.html">Blog</a></li> 
          <li><a href="/post/20240726.html"> Using ‘dd’ to benchmark SSD </a> </li>
          
        </ul>
      </div>
     <h1 class="text-3xl py-3.5"> Using ‘dd’ to benchmark SSD </h1>
     
     <span class="badge">Linux</span>
     
     <span class="badge">Benchmark</span>
     
     <span class="badge">SSD</span>
     
     
   
    <p class='py-3.5'>Using dd might be the simplest way to benchmark an SSD on Unix-like systems. It is also very dangerous (obviously). I only recommend this method in TEST environments. </p>  
       </div>
      
    <div class="collapse-content">
      <p>By Puyu Wang</p>
      <p>Published on Friday 2024-07-26 </p>
      <p>Last Modified on Friday 2024-07-26 </p>
    </div>
  </div>

  
 
    
  <div class="divider"></div>
  
  <div class="bg-base-200 p-5 rounded-lg">
   
    <article class="prose lg:prose-xl max-w-none">
     
      <h1>Using <code>dd</code> to Benchmark an SSD</h1>
<p>Benchmarking an SSD can provide valuable insights into its performance. One of the simplest, albeit risky, methods to do this on Unix-like systems is by using the <code>dd</code> command. This approach should be reserved for test environments only due to the potential risks involved.</p>
<h2>Benchmarking Methods</h2>
<p>Below are several <code>dd</code> commands used to benchmark an SSD:</p>
<pre><code class="language-bash"># Basic write test
dd if=/dev/zero of=test bs=1M count=1024

# Write test with sync after command execution
dd if=/dev/zero of=test bs=1M count=1024 ; sync

# Write test with synchronized I/O for each operation
dd if=/dev/zero of=test bs=1M count=1024 oflag=sync

# Write test using direct I/O
dd if=/dev/zero of=test bs=1M count=1024 oflag=direct

# Write test with final synchronization
dd if=/dev/zero of=test bs=1M count=1024 conv=fsync
</code></pre>
<h2>What do those commands mean?</h2>
<p>dd  if=/dev/zero of=test bs=1M count=1024  would tell the system to write ZERO bytes to a file called test which is 1024MiB,bs=1M means to read and write up to 1M bytes each time and count=1024 means to write 1024 times.</p>
<p>dd is not set by default to “sync”, that means the recent disk change might be cached and not be completely written before dd exiting. Consequently, you would find that dd would exit pretty fast.This would affect the benchmark results.</p>
<p>The next command is actually two commands being executed one after another. Anyone know about how Linux shell works would know that adding “; sync” does not change how the first part works. That means dd would print the benchmark results without waiting for disk sync.  This command is not a real-world case.</p>
<p>“oflag” is the option to define the way dd writes.</p>
<p>oflag=direct means to use direct I/O for data.</p>
<p>oflag=sync means to use synchronized I/O for data and metadata. This is supposed to be the slowest because the system would sync after writing each MB(due to  bs=1M ), in our case, it would be 1024 times. This is slow but not the real-world case either.</p>
<p>conv=fsync only ask the system sync once after dd commit the whole data.  It tells the system to physically write everything, including the metadata, before exiting. This is the closest one to the real-world environments. I would recommend using this one to test your disks.</p>
    </article>
      </div>
    
</div>

<div class="divider"></div>
<blockquote class="text-xl font-semibold italic text-center text-slate-900">
  <span class="before:block before:absolute before:-inset-1 before:-skew-y-3 before:bg-pink-500 relative inline-block">
    <span class="relative text-white" id="phrase"></span>
  </span>
</blockquote>
<div class="divider"></div>
<!-- phrase is a list, everytime show a random phrase -->
<script>
  const phrases_list = ['天之苍苍，其正色邪', '吾日三省吾身', '知行合一', '行有馀力，则以学文', '思无邪', '先行其言，而后从之', '尽美矣，又尽善也', '好仁者，无以尚之', '无所从来，亦无所去', '所谓佛法者，即非佛法。', '道法自然', '天下大事，必作於細', '為無為，事無事，味無味。', '周雖舊邦,其命維新'] ;

  function showRandomPhrase() {
      const randomIndex = Math.floor(Math.random() * phrases_list.length);
      document.getElementById('phrase').innerText = phrases_list[randomIndex];
  }
  window.onload = showRandomPhrase;
</script>

</body>
</html>
               